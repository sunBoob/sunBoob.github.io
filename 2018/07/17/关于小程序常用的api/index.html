<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><meta name="author" content="SunBoBo"><link rel="alternative" href="/atom.xml" title="SunBoBo" type="application/atom+xml"><link rel="icon" href="/favicon.png"><title>小程序中常用的api - SunBoBo</title><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/js/fancybox/jquery.fancybox.min.css"><!--[if lt IE 9]><script>(function(a,b){a="abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video".split(" ");for(b=a.length-1;b>=0;b--)document.createElement(a[b])})()</script><![endif]--><script src="/js/jquery-3.1.1.min.js"></script><script src="/js/fancybox/jquery.fancybox.min.js"></script></head><body style="opacity:0;"><header class="head"><h1 class="head-title u-fl"><a href="/">SunBoBo</a></h1><nav class="head-nav u-fr"><ul class="head-nav__list"><li class="head-nav__item"><a class="head-nav__link" href="/archives">Catalog（目录）</a></li></ul></nav></header><main class="main"><article class="post"><header class="post__head"> <time class="post__time" datetime="2018-07-16T16:00:00.000Z">July 17, 2018</time><h1 class="post__title"><a href="/2018/07/17/关于小程序常用的api/">小程序中常用的api</a></h1><div class="post__main echo"><h3 id="一、设置小程序顶部的标题"><a href="#一、设置小程序顶部的标题" class="headerlink" title="一、设置小程序顶部的标题"></a>一、设置小程序顶部的标题</h3><p>wx.setNavigationBarTitle({</p>
<p>​      title: ‘首页’</p>
<p>})</p>
<p>通过这个api可以设置小程序 每个页面顶部的  标题</p>
<hr>
<h3 id="二、模态对话框"><a href="#二、模态对话框" class="headerlink" title="二、模态对话框"></a>二、模态对话框</h3><p><strong>wx.showModal(Object object)</strong></p>
<p>参数：    </p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>是否必填</th>
<th>说明</th>
<th>支持版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td>string</td>
<td></td>
<td>是</td>
<td>提示的标题</td>
<td></td>
</tr>
<tr>
<td>content</td>
<td>string</td>
<td></td>
<td>是</td>
<td>提示的内容</td>
<td></td>
</tr>
<tr>
<td>showCancel</td>
<td>boolean</td>
<td>true</td>
<td>否</td>
<td>是否显示取消按钮</td>
<td></td>
</tr>
<tr>
<td>cancelText</td>
<td>string</td>
<td>‘取消’</td>
<td>否</td>
<td>取消按钮的文字，最多 4 个字符</td>
<td></td>
</tr>
<tr>
<td>cancelColor</td>
<td>string</td>
<td>#000000</td>
<td>否</td>
<td>取消按钮的文字颜色，必须是 16 进制格式的颜色字符串</td>
<td></td>
</tr>
<tr>
<td>confirmText</td>
<td>string</td>
<td>‘确定’</td>
<td>否</td>
<td>确认按钮的文字，最多 4 个字符</td>
<td></td>
</tr>
<tr>
<td>confirmColor</td>
<td>string</td>
<td>#3cc51f</td>
<td>否</td>
<td>确认按钮的文字颜色，必须是 16 进制格式的颜色字符串</td>
<td></td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用成功的回调函数</td>
<td></td>
</tr>
<tr>
<td>fail</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用失败的回调函数</td>
<td></td>
</tr>
<tr>
<td>complete</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<p>回调函数：</p>
<p>​    参数：<strong>Object res</strong></p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>说明</th>
<th>支持版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>confirm</td>
<td>boolean</td>
<td>为 true 时，表示用户点击了确定按钮</td>
<td></td>
</tr>
<tr>
<td>cancel</td>
<td>boolean</td>
<td>为 true 时，表示用户点击了取消（用于 Android 系统区分点击蒙层关闭还是点击取消按钮关闭）</td>
<td>&gt;= 1.1.0</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="三、消息提示框"><a href="#三、消息提示框" class="headerlink" title="三、消息提示框"></a>三、消息提示框</h3><p><strong>wx.showToast(Object object)</strong></p>
<h4 id="参数："><a href="#参数：" class="headerlink" title="参数："></a>参数：</h4><h5 id="Object-object"><a href="#Object-object" class="headerlink" title="Object object"></a>Object object</h5><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>是否必填</th>
<th>说明</th>
<th>支持版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>title</td>
<td>string</td>
<td></td>
<td>是</td>
<td>提示的内容</td>
<td></td>
</tr>
<tr>
<td>icon</td>
<td>string</td>
<td>‘success’</td>
<td>否</td>
<td>图标</td>
<td></td>
</tr>
<tr>
<td>image</td>
<td>string</td>
<td></td>
<td>否</td>
<td>自定义图标的本地路径，image 的优先级高于 icon</td>
<td>&gt;= 1.1.0</td>
</tr>
<tr>
<td>duration</td>
<td>number</td>
<td>1500</td>
<td>否</td>
<td>提示的延迟时间</td>
<td></td>
</tr>
<tr>
<td>mask</td>
<td>boolean</td>
<td>false</td>
<td>否</td>
<td>是否显示透明蒙层，防止触摸穿透</td>
<td></td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用成功的回调函数</td>
<td></td>
</tr>
<tr>
<td>fail</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用失败的回调函数</td>
<td></td>
</tr>
<tr>
<td>complete</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<p><strong>object.icon 的合法值</strong></p>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>success</td>
<td>显示成功图标，此时 title 文本最多显示 7 个汉字长度</td>
</tr>
<tr>
<td>loading</td>
<td>显示加载图标，此时 title 文本最多显示 7 个汉字长度</td>
</tr>
<tr>
<td>none</td>
<td>不显示图标，此时 title 文本最多可显示两行，<a href="https://developers.weixin.qq.com/miniprogram/dev/framework/compatibility.html" target="_blank" rel="external">1.9.0</a>及以上版本支持</td>
</tr>
</tbody>
</table>
<h4 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h4><ul>
<li><code>wx.showLoading</code> 和 <code>wx.showToast</code> 同时只能显示一个</li>
<li><code>wx.showToast</code> 应与 <code>wx.hideToast</code> 配对使用</li>
</ul>
<hr>
<h3 id="四、隐藏消息提示框"><a href="#四、隐藏消息提示框" class="headerlink" title="四、隐藏消息提示框"></a>四、隐藏消息提示框</h3><p><strong>wx.hideToast(Object object)</strong></p>
<h4 id="参数"><a href="#参数" class="headerlink" title="参数"></a>参数</h4><h5 id="Object-object-1"><a href="#Object-object-1" class="headerlink" title="Object object"></a>Object object</h5><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>是否必填</th>
<th>说明</th>
<th>支持版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>success</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用成功的回调函数</td>
<td></td>
</tr>
<tr>
<td>fail</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用失败的回调函数</td>
<td></td>
</tr>
<tr>
<td>complete</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="五、动态设置窗口的背景色"><a href="#五、动态设置窗口的背景色" class="headerlink" title="五、动态设置窗口的背景色"></a>五、动态设置窗口的背景色</h3><p><strong>wx.setBackgroundColor(Object object)</strong></p>
<blockquote>
<p>支持版本 &gt;= 2.1.0</p>
</blockquote>
<h4 id="参数-1"><a href="#参数-1" class="headerlink" title="参数"></a>参数</h4><h5 id="Object-object-2"><a href="#Object-object-2" class="headerlink" title="Object object"></a>Object object</h5><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>是否必填</th>
<th>说明</th>
<th>支持版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>backgroundColor</td>
<td>string</td>
<td></td>
<td>否</td>
<td>窗口的背景色，必须为十六进制颜色值</td>
<td></td>
</tr>
<tr>
<td>backgroundColorTop</td>
<td>string</td>
<td></td>
<td>否</td>
<td>顶部窗口的背景色，必须为十六进制颜色值，仅 iOS 支持</td>
<td></td>
</tr>
<tr>
<td>backgroundColorBottom</td>
<td>string</td>
<td></td>
<td>否</td>
<td>底部窗口的背景色，必须为十六进制颜色值，仅 iOS 支持</td>
<td></td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用成功的回调函数</td>
<td></td>
</tr>
<tr>
<td>fail</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用失败的回调函数</td>
<td></td>
</tr>
<tr>
<td>complete</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="六、动态设置下拉背景字体、loading-图的样式"><a href="#六、动态设置下拉背景字体、loading-图的样式" class="headerlink" title="六、动态设置下拉背景字体、loading 图的样式"></a>六、动态设置下拉背景字体、loading 图的样式</h3><p><strong>wx.setBackgroundTextStyle(Object object)</strong></p>
<blockquote>
<p>支持版本 &gt;= 2.1.0</p>
</blockquote>
<h4 id="参数-2"><a href="#参数-2" class="headerlink" title="参数"></a>参数</h4><h5 id="Object-object-3"><a href="#Object-object-3" class="headerlink" title="Object object"></a>Object object</h5><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>是否必填</th>
<th>说明</th>
<th>支持版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>textStyle</td>
<td>string</td>
<td></td>
<td>是</td>
<td>下拉背景字体、loading 图的样式。</td>
<td></td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用成功的回调函数</td>
<td></td>
</tr>
<tr>
<td>fail</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用失败的回调函数</td>
<td></td>
</tr>
<tr>
<td>complete</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<p><strong>object.textStyle 的合法值</strong></p>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>dark</td>
<td>dark 样式</td>
</tr>
<tr>
<td>light</td>
<td>light 样式</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="七、为-tabBar-某一项的右上角添加文本"><a href="#七、为-tabBar-某一项的右上角添加文本" class="headerlink" title="七、为 tabBar 某一项的右上角添加文本"></a>七、为 tabBar 某一项的右上角添加文本</h3><p><strong>wx.setTabBarBadge(Object object)</strong></p>
<blockquote>
<p>支持版本 &gt;= 1.9.0</p>
</blockquote>
<h4 id="参数-3"><a href="#参数-3" class="headerlink" title="参数"></a>参数</h4><h5 id="Object-object-4"><a href="#Object-object-4" class="headerlink" title="Object object"></a>Object object</h5><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>是否必填</th>
<th>说明</th>
<th>支持版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>index</td>
<td>number</td>
<td></td>
<td>是</td>
<td>tabBar 的哪一项，从左边算起</td>
<td></td>
</tr>
<tr>
<td>text</td>
<td>number</td>
<td></td>
<td>是</td>
<td>显示的文本，超过 3 个字符则显示成 …</td>
<td></td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用成功的回调函数</td>
<td></td>
</tr>
<tr>
<td>fail</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用失败的回调函数</td>
<td></td>
</tr>
<tr>
<td>complete</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="八、打开同一公众号下关联的另一个小程序（注：必须是同一公众号下，而非同个-open-账号下）"><a href="#八、打开同一公众号下关联的另一个小程序（注：必须是同一公众号下，而非同个-open-账号下）" class="headerlink" title="八、打开同一公众号下关联的另一个小程序（注：必须是同一公众号下，而非同个 open 账号下）"></a>八、打开<strong>同一公众号下关联</strong>的另一个小程序（注：必须是同一公众号下，而非同个 open 账号下）</h3><p><strong>wx.navigateToMiniProgram(Object object)</strong></p>
<p>注意：<strong>此接口即将废弃，请使用  组件来使用此功能。</strong></p>
<blockquote>
<p>支持版本 &gt;= 1.3.0</p>
</blockquote>
<h4 id="参数-4"><a href="#参数-4" class="headerlink" title="参数"></a>参数</h4><h5 id="Object-object-5"><a href="#Object-object-5" class="headerlink" title="Object object"></a>Object object</h5><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>是否必填</th>
<th>说明</th>
<th>支持版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>appId</td>
<td>string</td>
<td></td>
<td>是</td>
<td>要打开的小程序 appId</td>
<td></td>
</tr>
<tr>
<td>path</td>
<td>string</td>
<td></td>
<td>否</td>
<td>打开的页面路径，如果为空则打开首页</td>
<td></td>
</tr>
<tr>
<td>extraData</td>
<td>object</td>
<td></td>
<td>否</td>
<td>需要传递给目标小程序的数据，目标小程序可在 <code>App.onLaunch</code>，<code>App.onShow</code> 中获取到这份数据。</td>
<td></td>
</tr>
<tr>
<td>envVersion</td>
<td>string</td>
<td>release</td>
<td>否</td>
<td>要打开的小程序版本。仅在当前小程序为开发版或体验版时此参数有效。如果当前小程序是正式版，则打开的小程序必定是正式版。</td>
<td></td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用成功的回调函数</td>
<td></td>
</tr>
<tr>
<td>fail</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用失败的回调函数</td>
<td></td>
</tr>
<tr>
<td>complete</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<p><strong>object.envVersion 的合法值</strong></p>
<table>
<thead>
<tr>
<th>值</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>develop</td>
<td>开发版</td>
</tr>
<tr>
<td>trial</td>
<td>体验版</td>
</tr>
<tr>
<td>release</td>
<td>正式版</td>
</tr>
</tbody>
</table>
<hr>
<h3 id="九、返回到上一个小程序，只有在当前小程序是被其他小程序打开时可以调用成功"><a href="#九、返回到上一个小程序，只有在当前小程序是被其他小程序打开时可以调用成功" class="headerlink" title="九、返回到上一个小程序，只有在当前小程序是被其他小程序打开时可以调用成功"></a>九、返回到上一个小程序，只有在当前小程序是被其他小程序打开时可以调用成功</h3><p><strong>wx.navigateBackMiniProgram(Object object)</strong></p>
<blockquote>
<p>支持版本 &gt;= 1.3.0</p>
</blockquote>
<p>注意：<strong>微信客户端 iOS 6.5.9，Android 6.5.10 及以上版本支持</strong></p>
<h4 id="参数-5"><a href="#参数-5" class="headerlink" title="参数"></a>参数</h4><h5 id="Object-object-6"><a href="#Object-object-6" class="headerlink" title="Object object"></a>Object object</h5><table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>默认值</th>
<th>是否必填</th>
<th>说明</th>
<th>支持版本</th>
</tr>
</thead>
<tbody>
<tr>
<td>extraData</td>
<td>Object</td>
<td>{}</td>
<td>否</td>
<td>需要返回给上一个小程序的数据，上一个小程序可在 <code>App.onShow</code> 中获取到这份数据。 <a href="https://developers.weixin.qq.com/miniprogram/dev/framework/app-service/app.html" target="_blank" rel="external">详情</a>。</td>
<td></td>
</tr>
<tr>
<td>success</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用成功的回调函数</td>
<td></td>
</tr>
<tr>
<td>fail</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用失败的回调函数</td>
<td></td>
</tr>
<tr>
<td>complete</td>
<td>function</td>
<td></td>
<td>否</td>
<td>接口调用结束的回调函数（调用成功、失败都会执行）</td>
</tr>
</tbody>
</table>
<hr>
</div></header></article><div class="comments" id="lv-container" data-id="city" data-uid="your uid"><script>(function(d, s) {var j, e = d.getElementsByTagName(s)[0];if (typeof LivereTower === 'function') { return; } j = d.createElement(s);j.src = 'https://cdn-city.livere.com/js/embed.dist.js';j.async = true;e.parentNode.insertBefore(j, e);})(document, 'script');</script></div></main><footer class="foot"><div class="foot-copy">&copy; 2016-2018 SunBoBo</div></footer><script src="/js/scroller.js"></script><script src="/js/main.js"></script></body></html>